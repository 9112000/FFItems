<!DOCTYPE html>
<html lang="en">
<head>
    <title>Starexx Items</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="author" content="Starexx">
    <meta name="description" content="Search Free Fire game items by name or description to retrieve item ID, name & details. Battle in Style and be the last survivor!">
    <meta name="keywords" content="Free Fire items, Free Fire item ID, FF items list, Starexx FF, Garena Free Fire, battle royale, Starexx Items">
    <meta property="og:title" content="Starexx Items - Free Fire Item Search">
    <meta property="og:description" content="Search Free Fire game items by name or description to retrieve item ID, name & details.">
    <meta property="og:image" content="https://item-starexx.vercel.app/icon/android-chrome-192x192.png">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://item-starexx.vercel.app">
    <meta name="twitter:card" content="summary_large-image">
    <meta name="twitter:title" content="Starexx Items - Free Fire Item Info">
    <meta name="twitter:description" content="Quickly find Free Fire item IDs, names & details with Starexx.">
    <meta name="twitter:image" content="https://item-starexx.vercel.app/icons/android-chrome-192x192.png">
    <meta name="google-site-verification" content="J20YkdBYbFS0_YZdIu9Z-sKGKzYZfqOFFkQ0numjLq0">
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="manifest" href="/manifest.json">
    <link rel="canonical" href="https://item-starexx.vercel.app/">
    <meta name="robots" content="index, follow">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      @import url(https://cdn.jsdelivr.net/gh/9112000/GFF@main/font.css);
        :root {
            --background-color: #000;
            --text-color: #fff;
            --card-background: rgba(0, 0, 0, 0.6);
            --card-hover-background: #121212;
            --card-border: #000;
            --card-hover-border: #ffba00;
            --button-active-background: #ffba00;
            --button-active-text: #000;
            --header-background: rgba(0, 0, 0, 0.6);
            --header-border: #222;
            --sidebar-background: rgba(0, 0, 0, 0.8);
            --sidebar-border: #111;
            --search-placeholder: #555;
            --filter-active: #ffba00;
            --filter-active-text: #000;
            --detail-icon-border: #ffba00;
            --detail-name-color: #ffba00;
            --detail-description-color: #ccc;
            --table-header-background: rgba(0, 0, 0, 0.7);
            --table-header-color: #ffba00;
            --table-border: #222;
            --pagination-background: rgba(0, 0, 0, 0.6);
            --pagination-border: #121212;
        }
        
        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        *,.grid-container {
            font-family: 'GFF Starexx', sans-serif;
        }
        
        ::selection {
            background-color: #222;
            color: #fff;
        }
        
        body {
            background-color: var(--background-color);
            color: var(--text-color);
            margin: 0;
            padding: 0;
            min-height: 100vh;
            touch-action: pan-y;
            background-image: url('https://cdn.jsdelivr.net/gh/9112000/FFItems@3e6975e/assets/images/background.jpg');
            background-size: cover;
            background-attachment: fixed;
            background-position: center;
            overflow-x: hidden;
        }
        
        body::-webkit-scrollbar {
            display: none;
        }
        
        /* Header with Menu Button */
        .header {
            position: sticky;
            top: 0;
            z-index: 100;
            background: var(--header-background);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-bottom: none;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px 15px;
        }
        
        .header-tabs {
            display: flex;
            overflow-x: auto;
            gap: 5px;
            flex: 1;
            scrollbar-width: none;
        }
        
        .header-tabs::-webkit-scrollbar {
            display: none;
        }
        
        .header-menu-button {
            width: 30px;
            height: 30px;
            border-radius: 0%;
            background: transparent;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            border: none;
            margin-left: 10px;
        }
        
        .header-menu-button svg {
            width: 20px;
            height: 20px;
            color: #fff;
        }
        
        .sidebar {
            position: fixed;
            top: 0;
            right: -300px;
            width: 280px;
            height: 100%;
            background: var(--sidebar-background);
            backdrop-filter: blur(30px);
            -webkit-backdrop-filter: blur(30px);
            z-index: 1000;
            transition: right .3s;
            padding: 20px;
            overflow-y: auto;
            border-left: 1px solid var(--sidebar-border);
        }
        
        .sidebar.open {
            right: 0;
        }
        
        .sidebar-close {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.5rem;
            cursor: pointer;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .sidebar-search {
            margin-top: 35px;
            position: relative;
        }
        
        .sidebar-search-icon {
            position: absolute;
            left: 12px;
            top: 47%;
            transform: translateY(-50%);
            color: var(--search-placeholder);
        }
        
        .sidebar-textarea {
            width: 100%;
            padding: 10px 10px 10px 35px;
            border: 1px solid #222;
            background-color: transparent;
            color: var(--text-color);
            font-size: 14px;
            outline: 0;
            height: 40px;
            resize: none;
            border-radius: 10px;
        }
        
        .sidebar-textarea::placeholder {
            color: var(--search-placeholder);
        }
        
        .filter-tab.active, .sidebar-filter-button.active {
            background: var(--filter-active);
            color: var(--filter-active-text);
        }
        
        .sidebar-filters {
            margin-top: 15px;
        }
        
        .sidebar-filter-group {
            margin-bottom: 15px;
        }
        
        .sidebar-filter-title {
            color: var(--filter-active);
            font-size: 14px;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .sidebar-filter-options {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }
        
        .sidebar-filter-button {
            padding: 5px 10px;
            background: transparent;
            color: var(--text-color);
            border: none;
            border-radius: 0;
            font-size: 12px;
            cursor: pointer;
            transition: .2s;
        }
        
        .icon-card, .pagination {
            background: var(--card-background);
            user-select: none;
        }
        
        .pagination button, .pagination button:hover {
            color: var(--text-color);
        }
        
        .sidebar-filter-button:active {
            font-weight: 700;
        }
        
        .sidebar-filter-button.active {
            border-color: var(--filter-active);
        }
        
        .container {
            padding: 20px 15px;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
            transition: transform 0.3s ease;
        }
        
        .grid-container {
            display: grid;
            gap: 1px;
            padding: 1px;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
        }
        
        @media (max-width:480px) {
            .grid-container {
                grid-template-columns: repeat(3,1fr);
            }
            
            .header {
                padding: 10px;
            }
            
            .header-menu-button {
                width: 28px;
                height: 28px;
                margin-left: 8px;
            }
        }
        
        @media (min-width:481px) and (max-width:768px) {
            .grid-container {
                grid-template-columns: repeat(4,1fr);
            }
        }
        
        @media (min-width:769px) {
            .grid-container {
                grid-template-columns: repeat(10,1fr);
            }
        }
        
        .icon-card {
            text-align: center;
            cursor: pointer;
            border: 1px solid var(--card-border);
            aspect-ratio: 1/1;
            width: 100%;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .icon-card.active, .icon-card:hover {
            border: 2px solid var(--card-hover-border);
        }
        
        .icon-card .card-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: 1;
        }
        
        .icon-card .card-icon {
            max-width: 60%;
            max-height: 60%;
            width: auto;
            height: auto;
            object-fit: contain;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 2;
            animation: .5s ease-out forwards popBounce;
        }
        
        @keyframes popBounce {
            0% { opacity: 0; transform: translate(-50%, -50%) scale(.3); }
            70% { opacity: 1; transform: translate(-50%, -50%) scale(1.1); }
            100% { transform: translate(-50%, -50%) scale(1); }
        }
        
        .pagination-container {
            margin-top: 20px;
            display: flex;
            justify-content: center;
            width: 100%;
        }
        
        .pagination {
            display: flex;
            overflow-x: auto;
            white-space: nowrap;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid var(--pagination-border);
            padding: 5px;
            border-radius: 0;
            max-width: 100%;
            scrollbar-width: none;
            background: var(--pagination-background);
        }
        
        .pagination::-webkit-scrollbar {
            display: none;
        }
        
        .pagination button {
            padding: 5px 12px;
            margin: 2px;
            border: none;
            background: transparent;
            cursor: pointer;
            border-radius: 0;
            font-size: 14px;
            transition: background 0.3s ease, color 0.3s ease;
            min-width: 36px;
        }
        
        .pagination button.active {
            background: var(--button-active-background);
            color: var(--button-active-text);
            font-weight: 500;
        }
        
        .detail-view {
            display: none;
            padding: 20px 15px;
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        }
        
        .detail-icon-container {
            display: flex !important;
            justify-content: center !important;
            margin-bottom: 20px !important;
        }

        .detail-icon {
            width: 280px !important;
            height: 280px !important;
            object-fit: contain !important;
            background: transparent !important;
            padding: 20px !important;
            border: none !important;
            margin: 0 auto !important;
        }

        .detail-name {
            font-size: 20px !important;
            font-weight: bold !important;
            margin-bottom: 10px !important;
            color: #fff !important;
            text-align: center !important;
            text-transform: uppercase;
            cursor: pointer;
        }

        .detail-description {
            color: var(--detail-description-color) !important;
            font-size: 15px !important;
            margin-bottom: 30px !important;
            max-width: 600px !important;
            margin-left: 0 !important;
            margin-right: auto !important;
            text-align: center !important;
            cursor: pointer;
        }

        .detail-table {
            width: 100% !important;
            border-collapse: collapse !important;
            margin-top: 25px !important;
            border: 1px solid #111 !important;
            background: rgba(0, 0, 0, 0.4) !important;
            -webkit-backdrop-filter: blur(10px) !important;
            backdrop-filter: blur(10px) !important;
            text-align: left !important;
        }

        .detail-table th, 
        .detail-table td {
            border-bottom: 1px solid #111;
            padding: 12px 15px !important;
        }

        .detail-table th {
            color: #fff !important;
            font-weight: 500 !important;
            width: 30% !important;
        }

        .detail-table tr:last-child td, 
        .detail-table tr:last-child th {
            border-bottom: none !important;
        }
        
        .loading-dot {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 20px;
            height: 20px;
            background-color: var(--text-color);
            border-radius: 50%;
            animation: 1.5s ease-in-out infinite pulse;
            z-index: 9999;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: .3; transform: translate(-50%, -50%) scale(.8); }
            50% { opacity: 1; transform: translate(-50%, -50%) scale(1.2); }
        }
        
        .divider {
            border-top: 1px solid #151515;
            margin: 10px 0;
        }
        
        .footer, .sidebar-menu {
            margin-top: 20px;
        }
        
        .no-results {
            grid-column: 1/-1;
            padding: 20px;
            color: #888;
            font-size: 16px;
            text-align: center;
        }
        
        .footer {
            padding: 20px;
            font-size: 12px;
            color: #666;
            border-top: 1px solid var(--header-border);
            text-align: center;
        }
        
        .footer a {
            color: #888;
            text-decoration: none;
        }
        
        .filter-tab {
            padding: 8px 12px;
            background: transparent;
            color: var(--text-color);
            border: none;
            border-radius: 0;
            font-size: 12px;
            cursor: pointer;
            transition: .2s;
            white-space: nowrap;
            flex-shrink: 0;
        }
        
        .sidebar-menu-item {
            padding: 12px 0;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .sidebar-menu-item svg {
            transition: transform .2s;
        }
        
        .sidebar-menu-item.active svg {
            transform: rotate(90deg);
        }
        
        .sidebar-submenu {
            max-height: 0;
            overflow: hidden;
            transition: max-height .3s;
            padding-left: 15px;
        }
        
        .sidebar-submenu.open {
            max-height: 500px;
        }
        
        .sidebar-submenu-item {
            padding: 8px 0;
            color: #aaa;
            cursor: pointer;
        }
        
        .sidebar-submenu-item.active {
            color: var(--filter-active);
        }
        
        @media (max-width:600px) {
            .sidebar {
                width: 85%;
                right: -85%;
            }
            
            .grid-container {
                grid-template-columns: repeat(auto-fill, minmax(70px, 1fr));
            }
            
            .icon-card img {
                width: 40px;
                height: 40px;
            }
            
            .filter-tab {
                padding: 6px 10px;
                font-size: 11px;
            }
            
            .detail-icon {
                width: 140px;
                height: 140px;
            }
            
            .detail-name {
                font-size: 24px;
            }
            
            .detail-description {
                font-size: 16px;
            }
            
            .detail-table th, .detail-table td {
                padding: 8px 10px;
                font-size: 14px;
            }
        }
        
        /* Animation classes */
        .slide-out-left {
            animation: slideOutLeft 0.3s forwards;
        }
        
        .slide-in-right {
            animation: slideInRight 0.3s forwards;
        }
        
        @keyframes slideOutLeft {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(-100%); opacity: 0; display: none; }
        }
        
        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; display: block; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .svg-icon {
            width: 1em;
            height: 1em;
            vertical-align: -0.125em;
        }
        
        /* Back button in detail view */
        .detail-back-button {
            position: fixed;
            top: 15px;
            left: 15px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            display: none;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 101;
            border: none;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }
        
        .detail-back-button svg {
            width: 24px;
            height: 24px;
            color: #fff;
        }
        
        @media (max-width: 480px) {
            .detail-back-button {
                top: 10px;
                left: 10px;
                width: 36px;
                height: 36px;
            }
        }
        
        .github-footer {
            display: flex;
            justify-content: center;
            margin-top: 20px;
            padding: 15px;
        }
        
        .github-icon {
            width: 32px;
            height: 32px;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .github-icon:hover {
            transform: scale(1.1);
        }

    </style>
</head>
<body>
    <div class="loading-dot" id="loadingDot"></div>
    
    <!-- Header with Menu Button -->
    <div class="header" id="header">
        <div class="header-tabs" id="headerTabs"></div>
        <div class="header-menu-button" id="menuButton">
            <svg class="svg-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M4 6h16M4 12h16M4 18h16"/>
            </svg>
        </div>
    </div>
    
    <!-- Back Button for Detail View -->
    <div class="detail-back-button" id="detailBackButton">
        <svg class="svg-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
        </svg>
    </div>
    
    <div class="sidebar" id="sidebar">
        <div class="sidebar-close" id="sidebarClose">
            <svg class="svg-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M18 6L6 18M6 6l12 12"/>
            </svg>
        </div>
        <div class="sidebar-search">
            <div class="sidebar-search-icon">
                <svg class="svg-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                </svg>
            </div>
            <textarea class="sidebar-textarea" id="search" placeholder="Search by item details"></textarea>
        </div>
        <div class="sidebar-menu">
            <div class="sidebar-menu-item" id="rarityMenu">
                <span>Rarity</span>
                <svg class="svg-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M9 5l7 7-7 7"/>
                </svg>
            </div>
            <div class="sidebar-submenu" id="raritySubmenu">
                <div class="sidebar-filter-options" id="filter-Rare-buttons"></div>
            </div>
            <div class="sidebar-menu-item" id="sortMenu">
                <span>Sort By</span>
                <svg class="svg-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M9 5l7 7-7 7"/>
                </svg>
            </div>
            <div class="sidebar-submenu" id="sortSubmenu">
                <div class="sidebar-filter-options" id="filter-sort-buttons"></div>
            </div>
            <div class="sidebar-menu-item" id="collectionsMenu">
                <span>Collections</span>
                <svg class="svg-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M9 5l7 7-7 7"/>
                </svg>
            </div>
            <div class="sidebar-submenu" id="collectionsSubmenu">
                <div class="sidebar-filter-options" id="filter-collectionType-buttons"></div>
            </div>
            <div class="sidebar-menu-item" id="typesMenu">
                <span>Item Types</span>
                <svg class="svg-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M9 5l7 7-7 7"/>
                </svg>
            </div>
            <div class="sidebar-submenu" id="typesSubmenu">
                <div class="sidebar-filter-options" id="filter-itemType-buttons"></div>
            </div>
        </div>
        
        <!-- GitHub Link at Bottom -->
        <div class="github-footer">
            <svg class="github-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" onclick="window.open('https://github.com/9112000/FFItems', '_blank')">
                <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/>
            </svg>
        </div>
    </div>
    
    <div class="container" id="container" style="display: none;">
        <div class="grid-container" id="iconGrid"></div>
        <div class="pagination-container">
            <div class="pagination" id="pagination"></div>
        </div>
    </div>
    
    <div class="detail-view" id="detailView">
        <div class="detail-icon-container">
            <img id="detailIcon" class="detail-icon" alt="Item Icon" onclick="copyToClipboard(this.src, 'Icon URL')">
        </div>
        <h1 id="detailName" class="detail-name" onclick="copyToClipboard(this.textContent, 'Name')"></h1>
        <p id="detailDescription" class="detail-description" onclick="copyToClipboard(this.textContent, 'Description')"></p>
        
        <table class="detail-table">
            <tr>
                <th>Item ID</th>
                <td id="detailItemId" onclick="copyToClipboard(this.textContent, 'Item ID')"></td>
            </tr>
            <tr>
                <th>Icon</th>
                <td id="detailIconName" onclick="copyToClipboard(this.textContent, 'Icon Name')"></td>
            </tr>
            <tr>
                <th>Rarity</th>
                <td id="detailRarity"></td>
            </tr>
            <tr>
                <th>Collection Type</th>
                <td id="detailCollectionType"></td>
            </tr>
            <tr>
                <th>Item Type</th>
                <td id="detailItemType"></td>
            </tr>
        </table>
    </div>

    <script>
        /**
        @license MIT
        @author Starexx
        */
        let iconsData = [];
        let filteredData = [];
        let currentPage = 0;
        const itemsPerPage = 100;
        let uniqueFilters = {
            itemType: new Set(),
            Rare: new Set(),
            collectionType: new Set()
        };
        let lastClickedCard = null;
        let modalOpen = false;
        let currentSort = 'rarity';
        let currentTypeFilter = '';
        let currentCollectionFilter = '';
        let currentRarityFilter = '';

        const rarityDisplayNames = {
            'NONE': 'COMMON',
            'WHITE': 'COMMON',
            'BLUE': 'RARE',
            'GREEN': 'UNCOMMON',
            'ORANGE': 'MYTHIC',
            'ORANGE_PLUS': 'MYTHIC PLUS',
            'PURPLE': 'EPIC',
            'PURPLE_PLUS': 'EPIC PLUS',
            'Red': 'ARTIFACT'
        };

        const rarityCardImages = {
            'NONE': 'assets/images/card/COMMON.png',
            'WHITE': 'assets/images/card/COMMON.png',
            'BLUE': 'assets/images/card/RARE.png',
            'GREEN': 'assets/images/card/UNCOMMON.png',
            'ORANGE': 'assets/images/card/MYTHIC.png',
            'ORANGE_PLUS': 'assets/images/card/MYTHIC_PLUS.png',
            'PURPLE': 'assets/images/card/EPIC.png',
            'PURPLE_PLUS': 'assets/images/card/EPIC_PLUS.png',
            'Red': 'assets/images/card/ARTIFACT.png'
        };

        document.addEventListener("DOMContentLoaded", () => {
            setTimeout(() => {
                const loadingDot = document.getElementById("loadingDot");
                const container = document.getElementById("container");
                if (loadingDot) loadingDot.style.display = "none";
                if (container) container.style.display = "block";
            }, 1000);

            fetchIcons();
            
            const menuButton = document.getElementById("menuButton");
            const sidebarClose = document.getElementById("sidebarClose");
            const search = document.getElementById("search");
            const detailBackButton = document.getElementById("detailBackButton");
            
            if (menuButton) menuButton.addEventListener("click", toggleSidebar);
            if (sidebarClose) sidebarClose.addEventListener("click", toggleSidebar);
            if (search) search.addEventListener("input", filterIcons);
            if (detailBackButton) detailBackButton.addEventListener("click", backToList);
            
            // Add event listeners for filter menus
            const rarityMenu = document.getElementById("rarityMenu");
            const sortMenu = document.getElementById("sortMenu");
            const collectionsMenu = document.getElementById("collectionsMenu");
            const typesMenu = document.getElementById("typesMenu");
            
            if (rarityMenu) rarityMenu.addEventListener("click", () => toggleSubmenu('rarity'));
            if (sortMenu) sortMenu.addEventListener("click", () => toggleSubmenu('sort'));
            if (collectionsMenu) collectionsMenu.addEventListener("click", () => toggleSubmenu('collections'));
            if (typesMenu) typesMenu.addEventListener("click", () => toggleSubmenu('types'));
            
            // Add swipe functionality for sidebar
            let touchStartX = 0;
            let touchEndX = 0;
            
            document.addEventListener('touchstart', e => {
                touchStartX = e.changedTouches[0].screenX;
            }, false);
            
            document.addEventListener('touchend', e => {
                touchEndX = e.changedTouches[0].screenX;
                handleSwipe();
            }, false);
            
            function handleSwipe() {
                const swipeThreshold = 50;
                const screenWidth = window.innerWidth;
                
                if (touchEndX < touchStartX - swipeThreshold && touchStartX > screenWidth - 100) {
                    // Swipe left to open sidebar
                    const sidebar = document.getElementById("sidebar");
                    if (sidebar && !sidebar.classList.contains("open")) {
                        sidebar.classList.add("open");
                    }
                } else if (touchEndX > touchStartX + swipeThreshold) {
                    // Swipe right to close sidebar
                    const sidebar = document.getElementById("sidebar");
                    if (sidebar && sidebar.classList.contains("open")) {
                        sidebar.classList.remove("open");
                    }
                }
            }
            
            // Trigger PWA install prompt
            window.addEventListener('load', () => {
                if ('serviceWorker' in navigator) {
                    navigator.serviceWorker.register('sw.js').then(() => {
                        console.log('Service Worker Registered');
                    });
                }
                
                // Show PWA install prompt
                let deferredPrompt;
                window.addEventListener('beforeinstallprompt', (e) => {
                    e.preventDefault();
                    deferredPrompt = e;
                    setTimeout(() => {
                        if (deferredPrompt) {
                            deferredPrompt.prompt();
                            deferredPrompt.userChoice.then(() => {
                                deferredPrompt = null;
                            });
                        }
                    }, 3000);
                });
            });
        });

        function toggleSubmenu(type) {
            const menuItem = document.getElementById(`${type}Menu`);
            const submenu = document.getElementById(`${type}Submenu`);
            if (menuItem && submenu) {
                menuItem.classList.toggle('active');
                submenu.classList.toggle('open');
            }
        }

        function toggleSidebar() {
            const sidebar = document.getElementById("sidebar");
            if (sidebar) {
                sidebar.classList.toggle("open");
            }
        }

        async function fetchIcons() {
            try {
                const response = await fetch("assets/itemData.json");
                const data = await response.json();
                
                iconsData = data.map(item => ({
                    itemId: item["itemID"] || 0,
                    name: item["description"] || "Unknown",
                    iconName: item["icon"] || "Unknown",
                    description: item["description"] || "No description",
                    description2: item["description2"] || "No additional description",
                    itemType: item["itemType"] ? item["itemType"].replace(/_/g, ' ') : 'Unknown',
                    collectionType: item["collectionType"] ? item["collectionType"].replace(/_/g, ' ') : 'Unknown',
                    Rare: item["Rare"] || "NONE",
                    displayRarity: rarityDisplayNames[item["Rare"]] || item["Rare"] || "COMMON",
                    cardImageUrl: rarityCardImages[item["Rare"]] || 'assets/images/card/COMMON.png',
                    iconUrl: `https://freefiremobile-a.akamaihd.net/common/Local/PK/FF_UI_Icon/${item["icon"]}.png`
                }));

                iconsData.forEach(item => {
                    if (item.itemType && item.itemType !== 'Unknown') uniqueFilters.itemType.add(item.itemType);
                    if (item.displayRarity && item.displayRarity !== 'COMMON') uniqueFilters.Rare.add(item.displayRarity);
                    if (item.collectionType && item.collectionType !== 'Unknown') uniqueFilters.collectionType.add(item.collectionType);
                });

                populateFilterButtons("filter-Rare-buttons", uniqueFilters.Rare, "Rare");
                populateFilterButtons("filter-sort-buttons", new Set(["ID", "Name", "Rarity"]), "sort");
                populateFilterButtons("filter-collectionType-buttons", uniqueFilters.collectionType, "collectionType");
                populateFilterButtons("filter-itemType-buttons", uniqueFilters.itemType, "itemType");
                
                populateFilterTabs();

                filteredData = [...iconsData];
                sortIcons();
                renderIcons();
                
                const searchParams = new URLSearchParams(window.location.search);
                const query = searchParams.get('q');
                if (query) {
                    const searchInput = document.getElementById('search');
                    if (searchInput) {
                        searchInput.value = query;
                        filterIcons();
                    }
                }
            } catch (error) {
                console.error("Failed to retrieve Icons:", error);
                showError();
            }
        }

        function populateFilterButtons(containerId, values, filterType) {
            const container = document.getElementById(containerId);
            if (!container) return;
            
            container.innerHTML = '';
            
            Array.from(values).sort().forEach(value => {
                if (!value) return;
                
                const button = document.createElement("button");
                button.className = 'sidebar-filter-button';
                button.textContent = value;
                button.dataset.filterType = filterType;
                button.dataset.filterValue = value;
                
                button.onclick = function() {
                    const buttons = container.querySelectorAll('.sidebar-filter-button');
                    buttons.forEach(btn => btn.classList.remove('active'));
                    
                    if (filterType === 'sort') {
                        button.classList.add('active');
                        currentSort = value.toLowerCase();
                        sortIcons();
                        renderIcons();
                    } else {
                        const isActive = button.classList.contains('active');
                        buttons.forEach(btn => btn.classList.remove('active'));
                        
                        if (!isActive) {
                            button.classList.add('active');
                            
                            if (filterType === 'Rare') {
                                currentRarityFilter = value;
                            } else if (filterType === 'collectionType') {
                                currentCollectionFilter = value;
                            } else if (filterType === 'itemType') {
                                currentTypeFilter = value;
                            }
                        } else {
                            if (filterType === 'Rare') {
                                currentRarityFilter = '';
                            } else if (filterType === 'collectionType') {
                                currentCollectionFilter = '';
                            } else if (filterType === 'itemType') {
                                currentTypeFilter = '';
                            }
                        }
                        
                        applyFilters();
                    }
                };
                
                if (filterType === 'sort' && value.toLowerCase() === currentSort) {
                    button.classList.add('active');
                }
                
                container.appendChild(button);
            });
        }

        function populateFilterTabs() {
            const filterTabs = document.getElementById("headerTabs");
            if (!filterTabs) return;
            
            filterTabs.innerHTML = '';
            
            const allTab = document.createElement("button");
            allTab.className = 'filter-tab active';
            allTab.textContent = 'ALL';
            allTab.onclick = () => {
                currentTypeFilter = '';
                currentCollectionFilter = '';
                currentRarityFilter = '';
                
                document.querySelectorAll('.filter-tab').forEach(tab => tab.classList.remove('active'));
                allTab.classList.add('active');
                
                document.querySelectorAll('.sidebar-filter-button').forEach(btn => {
                    if (btn.dataset.filterType !== 'sort') {
                        btn.classList.remove('active');
                    }
                });
                
                applyFilters();
            };
            filterTabs.appendChild(allTab);
            
            Array.from(uniqueFilters.itemType).sort().forEach(type => {
                if (!type) return;
                const tab = document.createElement("button");
                tab.className = 'filter-tab';
                tab.textContent = type;
                tab.onclick = () => {
                    currentTypeFilter = type;
                    currentCollectionFilter = '';
                    currentRarityFilter = '';
                    
                    document.querySelectorAll('.filter-tab').forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    
                    document.querySelectorAll('.sidebar-filter-button').forEach(btn => {
                        if (btn.dataset.filterType !== 'sort') {
                            btn.classList.remove('active');
                        }
                    });
                    
                    const typeButton = document.querySelector(`.sidebar-filter-button[data-filter-value="${type}"]`);
                    if (typeButton) typeButton.classList.add('active');
                    
                    applyFilters();
                };
                filterTabs.appendChild(tab);
            });
            
            Array.from(uniqueFilters.collectionType).sort().forEach(collection => {
                if (!collection) return;
                const tab = document.createElement("button");
                tab.className = 'filter-tab';
                tab.textContent = collection;
                tab.onclick = () => {
                    currentCollectionFilter = collection;
                    currentTypeFilter = '';
                    currentRarityFilter = '';
                    
                    document.querySelectorAll('.filter-tab').forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    
                    document.querySelectorAll('.sidebar-filter-button').forEach(btn => {
                        if (btn.dataset.filterType !== 'sort') {
                            btn.classList.remove('active');
                        }
                    });
                    
                    const collectionButton = document.querySelector(`.sidebar-filter-button[data-filter-value="${collection}"]`);
                    if (collectionButton) collectionButton.classList.add('active');
                    
                    applyFilters();
                };
                filterTabs.appendChild(tab);
            });
        }

        function showError() {
            const grid = document.getElementById("iconGrid");
            if (grid) {
                grid.innerHTML = `<div class="no-results">Failed to load items. Please try again later.</div>`;
            }
        }

        function applyFilters() {
            const searchInput = document.getElementById("search");
            const searchQuery = searchInput ? searchInput.value.toLowerCase() : '';
            
            filteredData = iconsData.filter(item => {
                // Safely handle potentially null/undefined values
                const itemName = item.name || '';
                const itemId = item.itemId || '';
                const iconName = item.iconName || '';
                
                const matchesSearch = searchQuery === '' || 
                    itemName.toString().toLowerCase().includes(searchQuery) ||
                    itemId.toString().includes(searchQuery) ||
                    iconName.toLowerCase().includes(searchQuery);
                
                const matchesType = !currentTypeFilter || item.itemType === currentTypeFilter;
                const matchesRare = !currentRarityFilter || item.displayRarity === currentRarityFilter;
                const matchesCollection = !currentCollectionFilter || item.collectionType === currentCollectionFilter;
                
                return matchesSearch && matchesType && matchesRare && matchesCollection;
            });
            
            sortIcons();
            currentPage = 0;
            renderIcons();
        }

        function sortIcons() {
            if (currentSort === 'name') {
                filteredData.sort((a, b) => (a.name || '').localeCompare(b.name || ''));
            } else if (currentSort === 'id') {
                filteredData.sort((a, b) => (a.itemId || 0) - (b.itemId || 0));
            } else if (currentSort === 'rarity') {
                const rarityOrder = {
                    'COMMON': 1,
                    'UNCOMMON': 2,
                    'RARE': 3,
                    'EPIC': 4,
                    'EPIC PLUS': 5,
                    'MYTHIC': 6,
                    'MYTHIC PLUS': 7,
                    'ARTIFACT': 8
                };
                
                filteredData.sort((a, b) => {
                    const aRarity = rarityOrder[a.displayRarity] || 0;
                    const bRarity = rarityOrder[b.displayRarity] || 0;
                    return bRarity - aRarity || (a.itemId || 0) - (b.itemId || 0);
                });
            }
        }

        function renderIcons() {
            const grid = document.getElementById("iconGrid");
            if (!grid) return;
            
            const start = currentPage * itemsPerPage;
            const end = start + itemsPerPage;
            const visibleIcons = filteredData.slice(start, end);
            
            grid.innerHTML = "";

            if (filteredData.length === 0) {
                grid.innerHTML = `<div class="no-results">No items found matching your criteria</div>`;
                const paginationDiv = document.getElementById("pagination");
                if (paginationDiv) paginationDiv.innerHTML = "";
                return;
            }

            visibleIcons.forEach((icon, index) => {
                const card = document.createElement("div");
                card.className = "icon-card";
                card.dataset.index = start + index;
                card.onclick = (e) => {
                    document.querySelectorAll('.icon-card').forEach(c => {
                        c.classList.remove('active');
                    });
                    card.classList.add('active');
                    lastClickedCard = card;
                    showDetailView(icon);
                };
                
                const cardContainer = document.createElement("div");
                cardContainer.style.position = "relative";
                cardContainer.style.width = "100%";
                cardContainer.style.height = "100%";
                
                const cardBg = document.createElement("img");
                cardBg.src = icon.cardImageUrl;
                cardBg.alt = icon.name + " card background";
                cardBg.className = "card-bg";
                cardBg.onerror = () => {
                    cardBg.src = 'assets/images/error-404.png';
                };
                
                const cardIcon = document.createElement("img");
                cardIcon.src = icon.iconUrl;
                cardIcon.alt = icon.name;
                cardIcon.className = "card-icon";
                cardIcon.onerror = () => {
                    cardIcon.src = 'assets/images/error-404.png';
                };
                
                cardContainer.appendChild(cardBg);
                cardContainer.appendChild(cardIcon);
                card.appendChild(cardContainer);
                grid.appendChild(card);
            });

            updatePagination();
        }

        function updatePagination() {
            const paginationDiv = document.getElementById("pagination");
            if (!paginationDiv) return;
            
            const totalPages = Math.ceil(filteredData.length / itemsPerPage);
            paginationDiv.innerHTML = "";

            for (let i = 0; i < totalPages; i++) {
                const button = document.createElement("button");
                button.textContent = i + 1;
                button.classList.toggle("active", i === currentPage);
                button.onclick = () => changePage(i);
                paginationDiv.appendChild(button);
            }
        }

        function changePage(page) {
            currentPage = page;
            renderIcons();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function filterIcons() {
            applyFilters();
        }

        function showDetailView(icon) {
            const container = document.getElementById("container");
            const detailView = document.getElementById("detailView");
            const detailBackButton = document.getElementById("detailBackButton");
            const header = document.getElementById("header");
            
            if (container && detailView && detailBackButton && header) {
                // Apply slide animations
                container.classList.add("slide-out-left");
                
                setTimeout(() => {
                    container.style.display = "none";
                    detailView.style.display = "block";
                    detailView.classList.add("slide-in-right");
                    
                    // Show back button, hide header
                    detailBackButton.style.display = "flex";
                    header.style.display = "none";
                    
                    // Populate detail view
                    const detailIcon = document.getElementById("detailIcon");
                    const detailName = document.getElementById("detailName");
                    const detailDescription = document.getElementById("detailDescription");
                    const detailItemId = document.getElementById("detailItemId");
                    const detailIconName = document.getElementById("detailIconName");
                    const detailRarity = document.getElementById("detailRarity");
                    const detailCollectionType = document.getElementById("detailCollectionType");
                    const detailItemType = document.getElementById("detailItemType");
                    
                    if (detailIcon) {
                        detailIcon.src = icon.iconUrl;
                        detailIcon.onerror = () => {
                            detailIcon.src = 'assets/images/error-404.png';
                        };
                    }
                    
                    if (detailName) {
                        let name = icon.name || "Unknown";
                        detailName.textContent = name.toUpperCase();
                    }
                    
                    if (detailDescription) {
                        const description = icon.description2 || icon.description || "No description";
                        detailDescription.textContent = description === "No description" || description === "NONE" ? 
                            "No description provided" : description;
                    }
                    
                    if (detailItemId) detailItemId.textContent = icon.itemId || "Unknown";
                    if (detailIconName) {
                        let iconName = icon.iconName || "Unknown";
                        detailIconName.dataset.fullText = iconName; // Store full text for copying
                        if (iconName.length > 40) {
                            iconName = iconName.substring(0, 27) + '...';
                        }
                        detailIconName.textContent = iconName;
                    }
                    if (detailRarity) detailRarity.textContent = icon.displayRarity || "Unknown";
                    if (detailCollectionType) detailCollectionType.textContent = icon.collectionType || "Unknown";
                    if (detailItemType) detailItemType.textContent = icon.itemType || "Unknown";
                }, 300);
            }
        }

        function backToList() {
            const container = document.getElementById("container");
            const detailView = document.getElementById("detailView");
            const detailBackButton = document.getElementById("detailBackButton");
            const header = document.getElementById("header");
            
            if (container && detailView && detailBackButton && header) {
                // Apply slide animations
                detailView.classList.remove("slide-in-right");
                detailView.classList.add("slide-out-left");
                
                setTimeout(() => {
                    detailView.style.display = "none";
                    container.style.display = "block";
                    container.classList.remove("slide-out-left");
                    container.classList.add("slide-in-right");
                    
                    // Hide back button, show header
                    detailBackButton.style.display = "none";
                    header.style.display = "flex";
                    
                    setTimeout(() => {
                        container.classList.remove("slide-in-right");
                    }, 300);
                }, 300);
            }
        }
        
function copyToClipboard(text, type) {
    if (event && event.target && event.target.dataset && event.target.dataset.fullText) {
        text = event.target.dataset.fullText;
    }
    
    if (navigator.clipboard && window.isSecureContext) {
        navigator.clipboard.writeText(text).then(() => {
            showCopyNotification(type);
        }).catch(err => {
            console.error('Failed to copy: ', err);
            fallbackCopyToClipboard(text, type);
        });
    } else {
        fallbackCopyToClipboard(text, type);
    }
}
        
        function fallbackCopyToClipboard(text, type) {
            const textArea = document.createElement("textarea");
            textArea.value = text;
            textArea.style.position = "fixed";
            textArea.style.opacity = 0;
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
                const successful = document.execCommand('copy');
                if (successful) {
                    showCopyNotification(type);
                }
            } catch (err) {
                console.error('Fallback copy failed: ', err);
            }
            
            document.body.removeChild(textArea);
        }
        
        function showCopyNotification(type) {
            const notification = document.getElementById("copyNotification");
            if (notification) {
                notification.textContent = `${type} copied to clipboard!`;
                notification.classList.add("show");
                
                setTimeout(() => {
                    notification.classList.remove("show");
                }, 2000);
            }
        }

        if ("serviceWorker" in navigator) {
            window.addEventListener("load", () => {
                navigator.serviceWorker
                    .register("sw.js")
                    .then(reg => console.log("Service worker registered", reg))
                    .catch(err => console.error("Service worker registration failed", err));
            });
        }
    </script>
</body>
</html>
