<!DOCTYPE html>
<html lang="en">
<head>
    <title>Starexx Items</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="author" content="Starexx">
    <meta name="description" content="Search Free Fire game items by name or description to retrieve item ID, name & details. Battle in Style and be the last survivor!">
    <meta name="keywords" content="Free Fire items, Free Fire item ID, FF items list, Starexx FF, Garena Free Fire, battle royale, Starexx Items">
    <meta property="og:title" content="Starexx Items - Free Fire Item Search">
    <meta property="og:description" content="Search Free Fire game items by name or description to retrieve item ID, name & details.">
    <meta property="og:image" content="https://item-starexx.vercel.app/icon/android-chrome-192x192.png">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://item-starexx.vercel.app">
    <meta name="twitter:card" content="summary_large-image">
    <meta name="twitter:title" content="Starexx Items - Free Fire Item Info">
    <meta name="twitter:description" content="Quickly find Free Fire item IDs, names & details with Starexx.">
    <meta name="twitter:image" content="https://item-starexx.vercel.app/icons/android-chrome-192x192.png">
    <meta name="google-site-verification" content="J20YkdBYbFS0_YZdIu9Z-sKGKzYZfqOFFkQ0numjLq0">
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="manifest" href="/manifest.json">
    <link rel="canonical" href="https://item-starexx.vercel.app/">
    <meta name="robots" content="index, follow">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      @import url(https://cdn.jsdelivr.net/gh/9112000/GFF@main/font.css);
        :root {
            --background-color: #000;
            --text-color: #fff;
            --card-background: rgba(0, 0, 0, 0.6);
            --card-hover-background: #121212;
            --card-border: #000;
            --card-hover-border: #ffba00;
            --button-active-background: #ffba00;
            --button-active-text: #000;
            --header-background: rgba(0, 0, 0, 0.6);
            --header-border: #222;
            --sidebar-background: rgba(0, 0, 0, 0.8);
            --sidebar-border: #111;
            --search-placeholder: #555;
            --filter-active: #ffba00;
            --filter-active-text: #000;
            --detail-icon-border: #ffba00;
            --detail-name-color: #ffba00;
            --detail-description-color: #ccc;
            --table-header-background: rgba(0, 0, 0, 0.7);
            --table-header-color: #ffba00;
            --table-border: #222;
            --pagination-background: rgba(0, 0, 0, 0.6);
            --pagination-border: #121212;
            --transition-speed: 0.3s;
            --spacing-large: 20px;
            --spacing-medium: 15px;
            --border-radius-small: 5px;
            --border-radius-large: 20px;
        }
        
        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        *,.grid-container {
            font-family: 'GFF Starexx', sans-serif;
        }
        
        ::selection {
            background-color: rgba(255, 255, 255, 0.1);
            color: #fff;
        }
        
        body {
            background-color: var(--background-color);
            color: var(--text-color);
            margin: 0;
            padding: 0;
            min-height: 100vh;
            touch-action: pan-y;
            background-image: url('https://cdn.jsdelivr.net/gh/9112000/FFItems@3e6975e/assets/images/background.jpg');
            background-size: cover;
            background-attachment: fixed;
            background-position: center;
            overflow-x: hidden;
        }
        
        body::-webkit-scrollbar {
            display: none;
        }
        
        .header {
            position: sticky;
            top: 0;
            z-index: 100;
            background: var(--header-background);
            backdrop-filter: blur(30px);
            -webkit-backdrop-filter: blur(30px);
            border-bottom: none;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px 15px;
        }
        
        .header-tabs {
            display: flex;
            overflow-x: auto;
            gap: 5px;
            flex: 1;
            scrollbar-width: none;
        }
        
        .header-tabs::-webkit-scrollbar {
            display: none;
        }
        
        .header-menu-button {
            width: 30px;
            height: 30px;
            border-radius: 0%;
            background: transparent;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            border: none;
            margin-left: 10px;
        }
        
        .header-menu-button svg {
            width: 20px;
            height: 20px;
            color: #fff;
        }
        
        .sidebar {
            position: fixed;
            top: 0;
            right: -300px;
            width: 280px;
            height: 100%;
            background: var(--sidebar-background);
            backdrop-filter: blur(30px);
            -webkit-backdrop-filter: blur(30px);
            z-index: 1000;
            transition: right .3s;
            padding: 20px;
            overflow-y: auto;
            border: none;
        }
        
        .sidebar.open {
            right: 0;
        }
        
        .sidebar-close {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.5rem;
            cursor: pointer;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .sidebar-search {
            margin-top: 35px;
            position: relative;
        }
        
        .sidebar-search-icon {
            position: absolute;
            left: 12px;
            top: 47%;
            transform: translateY(-50%);
            color: var(--search-placeholder);
        }
        
        .sidebar-textarea {
            width: 100%;
            padding: 10px 10px 10px 35px;
            border: 1px solid #222;
            background-color: transparent;
            color: var(--text-color);
            font-size: 14px;
            outline: 0;
            height: 40px;
            resize: none;
            border-radius: 10px;
        }
        
        .sidebar-textarea::placeholder {
            color: var(--search-placeholder);
        }
        
        .filter-tab.active, .sidebar-filter-button.active {
            background: var(--filter-active);
            color: var(--filter-active-text);
        }
        
        .sidebar-filters {
            margin-top: 15px;
        }
        
        .sidebar-filter-group {
            margin-bottom: 15px;
        }
        
        .sidebar-filter-title {
            color: var(--filter-active);
            font-size: 14px;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .sidebar-filter-options {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        
        .sidebar-filter-button {
            padding: 8px 10px;
            background: transparent;
            color: var(--text-color);
            border: none;
            border-radius: 0;
            font-size: 12px;
            cursor: pointer;
            transition: .2s;
            text-align: left;
            position: relative;
            padding-left: 15px;
        }
        
        .sidebar-filter-button::before {
            content: "";
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            height: 60%;
            width: 2px;
            background-color: transparent;
        }
        
        .sidebar-filter-button.active::before {
            background-color: var(--filter-active);
        }
        
        .icon-card, .pagination {
            background: var(--card-background);
            user-select: none;
        }
        
        .pagination button, .pagination button:hover {
            color: var(--text-color);
        }
        
        .sidebar-filter-button:active {
            font-weight: 700;
        }
        
        .sidebar-filter-button.active {
            border-color: var(--filter-active);
        }
        
        .container {
            padding: 20px 15px;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
            transition: transform 0.3s ease;
        }
        
        .grid-container {
            display: grid;
            gap: 1px;
            padding: 1px;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
        }
        
        @media (max-width:480px) {
            .grid-container {
                grid-template-columns: repeat(3,1fr);
            }
            
            .header {
                padding: 10px;
            }
            
            .header-menu-button {
                width: 28px;
                height: 28px;
                margin-left: 8px;
            }
        }
        
        @media (min-width:481px) and (max-width:768px) {
            .grid-container {
                grid-template-columns: repeat(4,1fr);
            }
        }
        
        @media (min-width:769px) {
            .grid-container {
                grid-template-columns: repeat(10,1fr);
            }
        }
        
        .icon-card {
            text-align: center;
            cursor: pointer;
            border: 1px solid var(--card-border);
            aspect-ratio: 1/1;
            width: 100%;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .icon-card.active, .icon-card:hover {
            border: 2px solid var(--card-hover-border);
        }
        
        .icon-card .card-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: 1;
        }
        
        .icon-card .card-icon {
            max-width: 60%;
            max-height: 60%;
            width: auto;
            height: auto;
            object-fit: contain;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 2;
            animation: .5s ease-out forwards popBounce;
        }
        
        @keyframes popBounce {
            0% { opacity: 0; transform: translate(-50%, -50%) scale(.3); }
            70% { opacity: 1; transform: translate(-50%, -50%) scale(1.1); }
            100% { transform: translate(-50%, -50%) scale(1); }
        }
        
        .pagination-container {
            margin-top: 20px;
            display: flex;
            justify-content: center;
            width: 100%;
        }
        
        .pagination {
            display: flex;
            overflow-x: auto;
            white-space: nowrap;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid #000;
            padding: 5px;
            border-radius: 0;
            max-width: 100%;
            scrollbar-width: none;
            background: rgba(0, 0, 0, 0.3);
        }
        
        .pagination::-webkit-scrollbar {
            display: none;
        }
        
        .pagination button {
            padding: 5px 12px;
            margin: 2px;
            border: none;
            background: transparent;
            cursor: pointer;
            border-radius: 0;
            font-size: 14px;
            transition: background 0.3s ease, color 0.3s ease;
            min-width: 36px;
        }
        
        .pagination button.active {
            background: var(--button-active-background);
            color: var(--button-active-text);
            font-weight: 500;
        }
        
        .loading-dot {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 20px;
            height: 20px;
            background-color: var(--text-color);
            border-radius: 50%;
            animation: 1.5s ease-in-out infinite pulse;
            z-index: 9999;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: .3; transform: translate(-50%, -50%) scale(.8); }
            50% { opacity: 1; transform: translate(-50%, -50%) scale(1.2); }
        }
        
        .divider {
            border-top: 1px solid #151515;
            margin: 10px 0;
        }
        
        .footer, .sidebar-menu {
            margin-top: 20px;
        }
        
        .no-results {
            grid-column: 1/-1;
            padding: 20px;
            color: #888;
            font-size: 16px;
            text-align: center;
        }
        
        .footer {
            padding: 20px;
            font-size: 12px;
            color: #666;
            border-top: 1px solid var(--header-border);
            text-align: center;
        }
        
        .footer a {
            color: #888;
            text-decoration: none;
        }
        
        .filter-tab {
            padding: 8px 12px;
            background: transparent;
            color: var(--text-color);
            border: none;
            border-radius: 0;
            font-size: 12px;
            cursor: pointer;
            transition: .2s;
            white-space: nowrap;
            flex-shrink: 0;
        }
        
        .sidebar-menu-item {
            padding: 12px 0;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .sidebar-menu-item svg {
            transition: transform .2s;
        }
        
        .sidebar-menu-item.active svg {
            transform: rotate(90deg);
        }
        
        .sidebar-submenu {
            max-height: 0;
            overflow: hidden;
            transition: max-height .3s;
            padding-left: 15px;
        }
        
        .sidebar-submenu.open {
            max-height: 500px;
        }
        
        .sidebar-submenu-item {
            padding: 8px 0;
            color: #aaa;
            cursor: pointer;
            position: relative;
            padding-left: 15px;
        }
        
        .sidebar-submenu-item::before {
            content: "";
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            height: 60%;
            width: 2px;
            background-color: #333;
        }
        
        .sidebar-submenu-item.active {
            color: var(--filter-active);
        }
        
        .sidebar-submenu-item.active::before {
            background-color: var(--filter-active);
        }
        
        @media (max-width:600px) {
            .sidebar {
                width: 85%;
                right: -85%;
            }
            
            .grid-container {
                grid-template-columns: repeat(auto-fill, minmax(70px, 1fr));
            }
            
            .icon-card img {
                width: 40px;
                height: 40px;
            }
            
            .filter-tab {
                padding: 6px 10px;
                font-size: 11px;
            }
        }
        
        .svg-icon {
            width: 1em;
            height: 1em;
            vertical-align: -0.125em;
        }
        
        .github-footer {
            display: flex;
            justify-content: center;
            margin-top: 20px;
            padding: 15px;
        }
        
        .github-icon {
            width: 32px;
            height: 32px;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .github-icon:hover {
            transform: scale(1.1);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            backdrop-filter: blur(35px);
            -webkit-backdrop-filter: blur(35px);
            z-index: 1000;
            overflow: hidden;
            touch-action: none;
            align-items: center;
            justify-content: center;
        }
        
        .modal.show {
            display: flex;
        }
        
        .modal-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0);
            transition: opacity var(--transition-speed) ease;
        }
        .modal-divider.hidden {
    opacity: 0;
    height: 0;
    margin: 0;
    border: none;
}
        .modal-content {
            padding: var(--spacing-large);
            text-align: left;
            border: none;
            max-width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            z-index: 1001;
            width: 400px;
            background: transparent;
            border-radius: 10px;
            transform: scale(0.9);
            transition: all var(--transition-speed) ease;
        }
        
        .modal.show .modal-content {
            opacity: 1;
            transform: scale(1);
        }
        
        .modal-img-container {
            margin-top: 18vh;
            position: absolute;
            width: 50px;
            height: 50px;
            display: none;
            z-index: 1002;
            transform-origin: center;
        }
        
        .modal-img-container img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: var(--border-radius-small);
        }
        
        .modal img {
            width: 100px;
            height: 100px;
            margin-bottom: var(--spacing-medium);
            border-radius: 0;
            user-select: none;
            display: block;
            margin: 0 auto var(--spacing-medium);
            object-fit: contain;
        }
        
        .modal-close {
            margin-top: var(--spacing-medium);
            padding: 8px 16px;
            border: none;
            background: 0 0;
            color: #999;
            font-size: 12px;
            cursor: pointer;
            border-radius: var(--border-radius-large);
            transition: background var(--transition-speed) ease, color var(--transition-speed) ease;
            width: 100%;
            user-select: none;
        }

        .data-type-selector {
            display: flex;
            margin: 15px 0;
            background: transparent;
            border-radius: 0px;
            border: 1px solid #222;
            overflow: hidden;
        }
        
.data-type-selector {
    display: flex;
    justify-content: center;
    margin: 15px 0;
    background: transparent;
    border-radius: 10px;
    border: 1px solid #222;
    padding: 5px;
    gap: 10px;
}

.data-type-button {
    padding: 6px 54px;
    text-align: center;
    background: transparent;
    border: none;
    border-radius: 6px;
    color: var(--text-color);
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 14px;
    margin: 0 5px;
}

.data-type-button.active {
    background: #FFBA00;
    color: #000;
}

    </style>
</head>
<body>
    <div class="loading-dot" id="loadingDot"></div>
    
    <div class="header" id="header">
        <div class="header-tabs" id="headerTabs"></div>
        <div class="header-menu-button" id="menuButton">
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="240" height="240">
  <rect x="3" y="6" width="15" height="12" rx="4" ry="4"
        fill="none" stroke="#9b9b9b" stroke-width="2" stroke-linejoin="round"/>
  <path d="M9 6 L9 18"
        fill="none" stroke="#9b9b9b" stroke-width="2" stroke-linecap="round"/>
</svg>

        </div>
    </div>
    
    <div class="sidebar" id="sidebar">
        <div class="sidebar-close" id="sidebarClose">
            <svg class="svg-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M18 6L6 18M6 6l12 12"/>
            </svg>
        </div>
        <div class="sidebar-search">
            <div class="sidebar-search-icon">
                <svg class="svg-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                </svg>
            </div>
            <textarea class="sidebar-textarea" id="search" placeholder="Search by item details"></textarea>
        </div>
        
        <div class="data-type-selector">
            <button class="data-type-button active" id="itemsButton">Items</button>
            <button class="data-type-button" id="assetsButton">Assets</button>
        </div>
        
        <div class="sidebar-menu">
            <div class="sidebar-menu-item" id="rarityMenu">
                <span>Rarity</span>
                <svg class="svg-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M9 5l7 7-7 7"/>
                </svg>
            </div>
            <div class="sidebar-submenu" id="raritySubmenu">
                <div class="sidebar-filter-options" id="filter-Rare-buttons"></div>
            </div>
            <div class="sidebar-menu-item" id="sortMenu">
                <span>Sort By</span>
                <svg class="svg-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M9 5l7 7-7 7"/>
                </svg>
            </div>
            <div class="sidebar-submenu" id="sortSubmenu">
                <div class="sidebar-filter-options" id="filter-sort-buttons"></div>
            </div>
            <div class="sidebar-menu-item" id="collectionsMenu">
                <span>Collections</span>
                <svg class="svg-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M9 5l7 7-7 7"/>
                </svg>
            </div>
            <div class="sidebar-submenu" id="collectionsSubmenu">
                <div class="sidebar-filter-options" id="filter-collectionType-buttons"></div>
            </div>
            <div class="sidebar-menu-item" id="typesMenu">
                <span>Item Types</span>
                <svg class="svg-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M9 5l7 7-7 7"/>
                </svg>
            </div>
            <div class="sidebar-submenu" id="typesSubmenu">
                <div class="sidebar-filter-options" id="filter-itemType-buttons"></div>
            </div>
        </div>
        
        <div class="github-footer">
            <svg class="github-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" onclick="window.open('https://github.com/9112000/FFItems', '_blank')">
                <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/>
            </svg>
        </div>
    </div>
    
    <div class="container" id="container" style="display: none;">
        <div class="grid-container" id="iconGrid"></div>
        <div class="pagination-container">
            <div class="pagination" id="pagination"></div>
        </div>
    </div>

    <div class="modal" id="modal">
        <div class="modal-bg" id="modalBg"></div>
        <div class="modal-content">
            <img id="modalImage" alt="Item Image">
            <p>
                <b id="modalDescription"></b>
                <br>
                <span id="modalDescription2"></span>
            </p>
            <div class="divider"></div>
            <p>
                <b>Item ID: </b>
                <span id="modalItemId"></span>
                <br>
                <b>Icon: </b>
                <span id="modalIconName"></span>
            </p>
            <div class="divider"></div>
            <p>
                <span id="modalType"></span>
                <span id="modalRare"></span>
            </p>
            <button class="modal-close" id="modalClose">Tap to close</button>
        </div>
    </div>

    <script>
        let iconsData = [];
        let assetsData = [];
        let filteredData = [];
        let currentPage = 0;
        const itemsPerPage = 100;
        let uniqueFilters = {
            itemType: new Set(),
            Rare: new Set(),
            collectionType: new Set()
        };
        let lastClickedCard = null;
        let modalOpen = false;
        let currentSort = '';
        let currentTypeFilter = '';
        let currentCollectionFilter = '';
        let currentRarityFilter = '';
        let currentDataType = 'items';

        const rarityDisplayNames = {
            'NONE': 'COMMON',
            'WHITE': 'COMMON',
            'BLUE': 'RARE',
            'GREEN': 'UNCOMMON',
            'ORANGE': 'MYTHIC',
            'ORANGE_PLUS': 'MYTHIC PLUS',
            'PURPLE': 'EPIC',
            'PURPLE_PLUS': 'EPIC PLUS',
            'Red': 'ARTIFACT'
        };
        
        const rarityCardImages = {
           'NONE': 'https://cdn.jsdelivr.net/gh/9112000/FFItems@master/assets/images/card/COMMON.png',
           'WHITE': 'https://cdn.jsdelivr.net/gh/9112000/FFItems@master/assets/images/card/COMMON.png',
           'BLUE': 'https://cdn.jsdelivr.net/gh/9112000/FFItems@master/assets/images/card/RARE.png',
           'GREEN': 'https://cdn.jsdelivr.net/gh/9112000/FFItems@master/assets/images/card/UNCOMMON.png',
           'ORANGE': 'https://cdn.jsdelivr.net/gh/9112000/FFItems@master/assets/images/card/MYTHIC.png',
           'ORANGE_PLUS': 'https://cdn.jsdelivr.net/gh/9112000/FFItems@master/assets/images/card/MYTHIC_PLUS.png',
           'PURPLE': 'https://cdn.jsdelivr.net/gh/9112000/FFItems@master/assets/images/card/EPIC.png',
           'PURPLE_PLUS': 'https://cdn.jsdelivr.net/gh/9112000/FFItems@master/assets/images/card/EPIC_PLUS.png',
           'Red': 'https://cdn.jsdelivr.net/gh/9112000/FFItems@master/assets/images/card/ARTIFACT.png'
        };
        
        document.addEventListener("DOMContentLoaded", () => {
            setTimeout(() => {
                const loadingDot = document.getElementById("loadingDot");
                const container = document.getElementById("container");
                if (loadingDot) loadingDot.style.display = "none";
                if (container) container.style.display = "block";
            }, 1000);

            fetchIcons();
            fetchAssets();
            
            const menuButton = document.getElementById("menuButton");
            const sidebarClose = document.getElementById("sidebarClose");
            const search = document.getElementById("search");
            const modalBg = document.getElementById("modalBg");
            const modalClose = document.getElementById("modalClose");
            const itemsButton = document.getElementById("itemsButton");
            const assetsButton = document.getElementById("assetsButton");
            
            if (menuButton) menuButton.addEventListener("click", toggleSidebar);
            if (sidebarClose) sidebarClose.addEventListener("click", toggleSidebar);
            if (search) search.addEventListener("input", filterIcons);
            if (modalBg) modalBg.addEventListener("click", closeModal);
            if (modalClose) modalClose.addEventListener("click", closeModal);
            
            if (itemsButton) itemsButton.addEventListener("click", () => switchDataType('items'));
            if (assetsButton) assetsButton.addEventListener("click", () => switchDataType('assets'));
            
            const rarityMenu = document.getElementById("rarityMenu");
            const sortMenu = document.getElementById("sortMenu");
            const collectionsMenu = document.getElementById("collectionsMenu");
            const typesMenu = document.getElementById("typesMenu");
            
            if (rarityMenu) rarityMenu.addEventListener("click", () => toggleSubmenu('rarity'));
            if (sortMenu) sortMenu.addEventListener("click", () => toggleSubmenu('sort'));
            if (collectionsMenu) collectionsMenu.addEventListener("click", () => toggleSubmenu('collections'));
            if (typesMenu) typesMenu.addEventListener("click", () => toggleSubmenu('types'));
            
            window.addEventListener('load', () => {
                if ('serviceWorker' in navigator) {
                    navigator.serviceWorker.register('sw.js').then(() => {
                        console.log('Service Worker Registered');
                    });
                }
                
                let deferredPrompt;
                window.addEventListener('beforeinstallprompt', (e) => {
                    e.preventDefault();
                    deferredPrompt = e;
                    setTimeout(() => {
                        if (deferredPrompt) {
                            deferredPrompt.prompt();
                            deferredPrompt.userChoice.then(() => {
                                deferredPrompt = null;
                            });
                        }
                    }, 3000);
                });
            });
        });

        function toggleSubmenu(type) {
            const menuItem = document.getElementById(`${type}Menu`);
            const submenu = document.getElementById(`${type}Submenu`);
            if (menuItem && submenu) {
                menuItem.classList.toggle('active');
                submenu.classList.toggle('open');
            }
        }

        function toggleSidebar() {
            const sidebar = document.getElementById("sidebar");
            if (sidebar) {
                sidebar.classList.toggle("open");
            }
        }

        function switchDataType(type) {
            currentDataType = type;
            
            const itemsButton = document.getElementById("itemsButton");
            const assetsButton = document.getElementById("assetsButton");
            
            if (itemsButton && assetsButton) {
                itemsButton.classList.toggle('active', type === 'items');
                assetsButton.classList.toggle('active', type === 'assets');
            }
            
            applyFilters();
        }

        async function fetchIcons() {
            try {
                const response = await fetch("https://cdn.jsdelivr.net/gh/9112000/FFItems@30594bf/assets/itemData.json");
                const data = await response.json();
                
                iconsData = data.map(item => ({
                    itemId: item["itemID"] || 0,
                    name: item["description"] || "Unknown",
                    iconName: item["icon"] || "Unknown",
                    description: item["description"] || "No description",
                    description2: item["description2"] || "No additional description",
                    itemType: item["itemType"] ? item["itemType"].replace(/_/g, ' ') : 'Unknown',
                    collectionType: item["collectionType"] ? item["collectionType"].replace(/_/g, ' ') : 'Unknown',
                    Rare: item["Rare"] || "NONE",
                    displayRarity: rarityDisplayNames[item["Rare"]] || item["Rare"] || "COMMON",
                    cardImageUrl: rarityCardImages[item["Rare"]] || 'assets/images/card/COMMON.png',
                    iconUrl: `https://freefiremobile-a.akamaihd.net/common/Local/PK/FF_UI_Icon/${item["icon"]}.png`,
                    dataType: 'item'
                }));

                iconsData.forEach(item => {
                    if (item.itemType && item.itemType !== 'Unknown') uniqueFilters.itemType.add(item.itemType);
                    if (item.displayRarity && item.displayRarity !== 'COMMON') uniqueFilters.Rare.add(item.displayRarity);
                    if (item.collectionType && item.collectionType !== 'Unknown') uniqueFilters.collectionType.add(item.collectionType);
                });

                populateFilterButtons("filter-Rare-buttons", uniqueFilters.Rare, "Rare");
                populateFilterButtons("filter-sort-buttons", new Set(["ID", "Name", "Rarity"]), "sort");
                populateFilterButtons("filter-collectionType-buttons", uniqueFilters.collectionType, "collectionType");
                populateFilterButtons("filter-itemType-buttons", uniqueFilters.itemType, "itemType");
                
                populateFilterTabs();

                filteredData = [...iconsData];
                sortIcons();
                renderIcons();
                
                const searchParams = new URLSearchParams(window.location.search);
                const query = searchParams.get('q');
                if (query) {
                    const searchInput = document.getElementById('search');
                    if (searchInput) {
                        searchInput.value = query;
                        filterIcons();
                    }
                }
            } catch (error) {
                console.error("Failed to retrieve Icons:", error);
                showError();
            }
        }

        async function fetchAssets() {
            try {
                const response = await fetch("assets/assets.json");
                const data = await response.json();
                
                assetsData = data.map(url => ({
                    iconUrl: url,
                    name: url.split('/').pop().replace('.png', ''),
                    dataType: 'asset'
                }));
            } catch (error) {
                console.error("Failed to retrieve Assets:", error);
            }
        }

        function populateFilterButtons(containerId, values, filterType) {
            const container = document.getElementById(containerId);
            if (!container) return;
            
            container.innerHTML = '';
            
            Array.from(values).sort().forEach(value => {
                if (!value) return;
                
                const button = document.createElement("button");
                button.className = 'sidebar-filter-button';
                button.textContent = value;
                button.dataset.filterType = filterType;
                button.dataset.filterValue = value;
                
                button.onclick = function() {
                    const buttons = container.querySelectorAll('.sidebar-filter-button');
                    buttons.forEach(btn => btn.classList.remove('active'));
                    
                    if (filterType === 'sort') {
                        button.classList.add('active');
                        currentSort = value.toLowerCase();
                        sortIcons();
                        renderIcons();
                    } else {
                        const isActive = button.classList.contains('active');
                        buttons.forEach(btn => btn.classList.remove('active'));
                        
                        if (!isActive) {
                            button.classList.add('active');
                            
                            if (filterType === 'Rare') {
                                currentRarityFilter = value;
                            } else if (filterType === 'collectionType') {
                                currentCollectionFilter = value;
                            } else if (filterType === 'itemType') {
                                currentTypeFilter = value;
                            }
                        } else {
                            if (filterType === 'Rare') {
                                currentRarityFilter = '';
                            } else if (filterType === 'collectionType') {
                                currentCollectionFilter = '';
                            } else if (filterType === 'itemType') {
                                currentTypeFilter = '';
                            }
                        }
                        
                        applyFilters();
                    }
                };
                
                if (filterType === 'sort' && value.toLowerCase() === currentSort) {
                    button.classList.add('active');
                }
                
                container.appendChild(button);
            });
        }

        function populateFilterTabs() {
            const filterTabs = document.getElementById("headerTabs");
            if (!filterTabs) return;
            
            filterTabs.innerHTML = '';
            
            const allTab = document.createElement("button");
            allTab.className = 'filter-tab active';
            allTab.textContent = 'ALL';
            allTab.onclick = () => {
                currentTypeFilter = '';
                currentCollectionFilter = '';
                currentRarityFilter = '';
                
                document.querySelectorAll('.filter-tab').forEach(tab => tab.classList.remove('active'));
                allTab.classList.add('active');
                
                document.querySelectorAll('.sidebar-filter-button').forEach(btn => {
                    if (btn.dataset.filterType !== 'sort') {
                        btn.classList.remove('active');
                    }
                });
                
                applyFilters();
            };
            filterTabs.appendChild(allTab);
            
            Array.from(uniqueFilters.itemType).sort().forEach(type => {
                if (!type) return;
                const tab = document.createElement("button");
                tab.className = 'filter-tab';
                tab.textContent = type;
                tab.onclick = () => {
                    currentTypeFilter = type;
                    currentCollectionFilter = '';
                    currentRarityFilter = '';
                    
                    document.querySelectorAll('.filter-tab').forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    
                    document.querySelectorAll('.sidebar-filter-button').forEach(btn => {
                        if (btn.dataset.filterType !== 'sort') {
                            btn.classList.remove('active');
                        }
                    });
                    
                    const typeButton = document.querySelector(`.sidebar-filter-button[data-filter-value="${type}"]`);
                    if (typeButton) typeButton.classList.add('active');
                    
                    applyFilters();
                };
                filterTabs.appendChild(tab);
            });
            
            Array.from(uniqueFilters.collectionType).sort().forEach(collection => {
                if (!collection) return;
                const tab = document.createElement("button");
                tab.className = 'filter-tab';
                tab.textContent = collection;
                tab.onclick = () => {
                    currentCollectionFilter = collection;
                    currentTypeFilter = '';
                    currentRarityFilter = '';
                    
                    document.querySelectorAll('.filter-tab').forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    
                    document.querySelectorAll('.sidebar-filter-button').forEach(btn => {
                        if (btn.dataset.filterType !== 'sort') {
                            btn.classList.remove('active');
                        }
                    });
                    
                    const collectionButton = document.querySelector(`.sidebar-filter-button[data-filter-value="${collection}"]`);
                    if (collectionButton) collectionButton.classList.add('active');
                    
                    applyFilters();
                };
                filterTabs.appendChild(tab);
            });
        }

        function showError() {
            const grid = document.getElementById("iconGrid");
            if (grid) {
                grid.innerHTML = `<div class="no-results">Failed to load items. Please try again later.</div>`;
            }
        }

        function applyFilters() {
            const searchInput = document.getElementById("search");
            const searchQuery = searchInput ? searchInput.value.toLowerCase() : '';
            
            if (currentDataType === 'items') {
                filteredData = iconsData.filter(item => {
                    const itemName = item.name || '';
                    const itemId = item.itemId || '';
                    const iconName = item.iconName || '';
                    
                    const matchesSearch = searchQuery === '' || 
                        itemName.toString().toLowerCase().includes(searchQuery) ||
                        itemId.toString().includes(searchQuery) ||
                        iconName.toLowerCase().includes(searchQuery);
                    
                    const matchesType = !currentTypeFilter || item.itemType === currentTypeFilter;
                    const matchesRare = !currentRarityFilter || item.displayRarity === currentRarityFilter;
                    const matchesCollection = !currentCollectionFilter || item.collectionType === currentCollectionFilter;
                    
                    return matchesSearch && matchesType && matchesRare && matchesCollection;
                });
                
                sortIcons();
            } else {
                filteredData = assetsData.filter(asset => {
                    const assetName = asset.name || '';
                    return searchQuery === '' || assetName.toLowerCase().includes(searchQuery);
                });
            }
            
            currentPage = 0;
            renderIcons();
        }

        function sortIcons() {
            if (currentSort === 'name') {
                filteredData.sort((a, b) => (a.name || '').localeCompare(b.name || ''));
            } else if (currentSort === 'id') {
                filteredData.sort((a, b) => (a.itemId || 0) - (b.itemId || 0));
            } else if (currentSort === 'rarity') {
                const rarityOrder = {
                    'COMMON': 1,
                    'UNCOMMON': 2,
                    'RARE': 3,
                    'EPIC': 4,
                    'EPIC PLUS': 5,
                    'MYTHIC': 6,
                    'MYTHIC PLUS': 7,
                    'ARTIFACT': 8
                };
                
                filteredData.sort((a, b) => {
                    const aRarity = rarityOrder[a.displayRarity] || 0;
                    const bRarity = rarityOrder[b.displayRarity] || 0;
                    return bRarity - aRarity || (a.itemId || 0) - (b.itemId || 0);
                });
            }
        }

        function renderIcons() {
            const grid = document.getElementById("iconGrid");
            if (!grid) return;
            
            const start = currentPage * itemsPerPage;
            const end = start + itemsPerPage;
            const visibleIcons = filteredData.slice(start, end);
            
            grid.innerHTML = "";

            if (filteredData.length === 0) {
                grid.innerHTML = `<div class="no-results">No items found matching your criteria</div>`;
                const paginationDiv = document.getElementById("pagination");
                if (paginationDiv) paginationDiv.innerHTML = "";
                return;
            }

            visibleIcons.forEach((icon, index) => {
                const card = document.createElement("div");
                card.className = "icon-card";
                card.dataset.index = start + index;
                card.onclick = (e) => {
                    document.querySelectorAll('.icon-card').forEach(c => {
                        c.classList.remove('active');
                    });
                    card.classList.add('active');
                    lastClickedCard = card;
                    showModal(icon);
                };
                
                const cardContainer = document.createElement("div");
                cardContainer.style.position = "relative";
                cardContainer.style.width = "100%";
                cardContainer.style.height = "100%";
                
                if (currentDataType === 'items') {
                    const cardBg = document.createElement("img");
                    cardBg.src = icon.cardImageUrl;
                    cardBg.alt = icon.name + " card background";
                    cardBg.className = "card-bg";
                    cardBg.onerror = () => {
                        cardBg.src = 'https://cdn.jsdelivr.net/gh/9112000/FFItems@master/assets/images/error-404.png';
                    };
                    
                    const cardIcon = document.createElement("img");
                    cardIcon.src = icon.iconUrl;
                    cardIcon.alt = icon.name;
                    cardIcon.className = "card-icon";
                    cardIcon.onerror = () => {
                        cardIcon.src = 'https://cdn.jsdelivr.net/gh/9112000/FFItems@master/assets/images/error-404.png';
                    };
                    
                    cardContainer.appendChild(cardBg);
                    cardContainer.appendChild(cardIcon);
                } else {
                    const cardIcon = document.createElement("img");
                    cardIcon.src = icon.iconUrl;
                    cardIcon.alt = icon.name;
                    cardIcon.className = "card-icon";
                    cardIcon.style.position = "absolute";
                    cardIcon.style.top = "50%";
                    cardIcon.style.left = "50%";
                    cardIcon.style.transform = "translate(-50%, -50%)";
                    cardIcon.style.maxWidth = "80%";
                    cardIcon.style.maxHeight = "80%";
                    cardIcon.onerror = () => {
                        cardIcon.src = 'https://cdn.jsdelivr.net/gh/9112000/FFItems@master/assets/images/error-404.png';
                    };
                    
                    cardContainer.appendChild(cardIcon);
                }
                
                card.appendChild(cardContainer);
                grid.appendChild(card);
            });

            updatePagination();
        }

        function updatePagination() {
            const paginationDiv = document.getElementById("pagination");
            if (!paginationDiv) return;
            
            const totalPages = Math.ceil(filteredData.length / itemsPerPage);
            paginationDiv.innerHTML = "";

            for (let i = 0; i < totalPages; i++) {
                const button = document.createElement("button");
                button.textContent = i + 1;
                button.classList.toggle("active", i === currentPage);
                button.onclick = () => changePage(i);
                paginationDiv.appendChild(button);
            }
        }

        function changePage(page) {
            currentPage = page;
            renderIcons();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function filterIcons() {
            applyFilters();
        }

function showModal(item) {
    const modal = document.getElementById("modal");
    const modalImage = document.getElementById("modalImage");
    const modalDescription = document.getElementById("modalDescription");
    const modalDescription2 = document.getElementById("modalDescription2");
    const modalItemId = document.getElementById("modalItemId");
    const modalIconName = document.getElementById("modalIconName");
    const modalType = document.getElementById("modalType");
    const modalRare = document.getElementById("modalRare");
    
    if (modal && modalImage) {
        modalImage.src = item.iconUrl;
        modalImage.onerror = () => {
            modalImage.src = 'https://cdn.jsdelivr.net/gh/9112000/FFItems@master/assets/images/error-404.png';
        };
        
        if (item.dataType === 'item') {
            // Show all details for items
            if (modalDescription) modalDescription.textContent = item.name || "Unknown";
            if (modalDescription2) {
                const description = item.description2 || item.description || "No description";
                modalDescription2.textContent = description === "No description" || description === "NONE" ?
                    "No description provided" : description;
            }
            if (modalItemId) modalItemId.textContent = item.itemId || "Unknown";
            if (modalIconName) modalIconName.textContent = item.iconName || "Unknown";
            if (modalType) modalType.textContent = item.itemType || "Unknown";
            if (modalRare) modalRare.textContent = item.displayRarity || "Unknown";
            document.querySelectorAll('#modalDescription2, #modalItemId, #modalType, #modalRare').forEach(el => {
                el.style.display = '';
            });
            document.querySelectorAll('.divider').forEach(el => {
                el.style.display = '';
            });
        } else {
            if (modalDescription) modalDescription.textContent = "";
            if (modalDescription2) modalDescription2.textContent = "";
            if (modalItemId) modalItemId.textContent = "Unavailable in assets mode.";
            if (modalIconName) modalIconName.textContent = item.name || "Unknown";
            if (modalType) modalType.textContent = "";
            if (modalRare) modalRare.textContent = "";
            
            document.querySelectorAll('#modalDescription2, #item.description, #modalType, #modalRare').forEach(el => {
                el.style.display = 'none';
            });
            document.querySelectorAll('.divider').forEach(el => {
                el.style.display = 'none';
            });
        }
        
        modal.classList.add("show");
    }
}

        function closeModal() {
            const modal = document.getElementById("modal");
            if (modal) {
                modal.classList.remove("show");
            }
        }
        
        function copyToClipboard(text, type) {
            if (navigator.clipboard && window.isSecureContext) {
                navigator.clipboard.writeText(text).then(() => {
                    showCopyNotification(type);
                }).catch(err => {
                    console.error('Failed to copy: ', err);
                    fallbackCopyToClipboard(text, type);
                });
            } else {
                fallbackCopyToClipboard(text, type);
            }
        }
        
        function fallbackCopyToClipboard(text, type) {
            const textArea = document.createElement("textarea");
            textArea.value = text;
            textArea.style.position = "fixed";
            textArea.style.opacity = 0;
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
                const successful = document.execCommand('copy');
                if (successful) {
                    showCopyNotification(type);
                }
            } catch (err) {
                console.error('Fallback copy failed: ', err);
            }
            
            document.body.removeChild(textArea);
        }
        
        function showCopyNotification(type) {
            alert(`${type} copied to clipboard!`);
        }

        if ("serviceWorker" in navigator) {
            window.addEventListener("load", () => {
                navigator.serviceWorker
                    .register("sw.js")
                    .then(reg => console.log("Service worker registered", reg))
                    .catch(err => console.error("Service worker registration failed", err));
            });
        }
    </script>
</body>
</html>
